# =============================================================================
# Ethereum RPC Configuration
# =============================================================================
# Either use single provider (legacy mode) OR provider YAML config (recommended)
# Single provider (legacy):
ETH_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# OR use provider YAML config (preferred for production with failover):
# RPC_CONFIG=config/providers.yaml

# =============================================================================
# MongoDB Configuration
# =============================================================================
MONGODB_URI=mongodb://localhost:27017
MONGODB_DB=ethereum

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URI=redis://localhost:6379
USE_REDIS=true

# =============================================================================
# Ingestion Configuration
# =============================================================================
# Starting block number for ingestion
START_BLOCK=0

# Polling interval in seconds (how often to check for new blocks)
POLL_INTERVAL=12

# Initial batch size (number of blocks to process per batch)
# Free-tier RPC providers typically limit to 10 blocks
BLOCK_BATCH_SIZE=10

# Force start from START_BLOCK, ignoring last processed block in MongoDB
# Set to 'true' to reset and start from START_BLOCK
RESET_START_BLOCK=false

# =============================================================================
# Adaptive Batch Configuration
# =============================================================================
# Enable adaptive batch sizing (automatically adjusts batch size based on performance)
# Set to 'false' to use fixed batch size (BLOCK_BATCH_SIZE)
ADAPTIVE_BATCH=true

# Minimum batch size (used when adaptive batch is enabled)
BATCH_MIN_SIZE=1

# Maximum batch size (used when adaptive batch is enabled)
BATCH_MAX_SIZE=100

# Number of successful batches before increasing batch size
BATCH_SUCCESS_STREAK=3

# Divisor for batch size on failure (e.g., 2 = halve the batch size)
BATCH_FAILURE_BACKOFF=2

# =============================================================================
# Server Configuration
# =============================================================================
SERVER_PORT=8080

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Enable file logging (true/false)
LOG_TO_FILE=false

# Log file path (only used if LOG_TO_FILE=true)
LOG_FILE_PATH=logs/app.log

# Log format: text or json
LOG_FORMAT=text

# Maximum log file size in MB before rotation
LOG_MAX_SIZE_MB=100

# Maximum number of backup log files to keep
LOG_MAX_BACKUPS=7

# Maximum age of log files in days before deletion
LOG_MAX_AGE_DAYS=30

# =============================================================================
# Streaming Configuration (Optional)
# =============================================================================
# Enable real-time event streaming via WebSocket/SSE
ENABLE_STREAM=false

# Streaming type: ws (WebSocket) or sse (Server-Sent Events)
STREAM_TYPE=ws

# Route path for streaming endpoint
STREAM_ROUTE=/ws

# Buffer size for streaming events
STREAM_BUFFER=1024

# Port for streaming (if separate from main server)
STREAM_PORT=8090
